---

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';

---


<Layout>
	<Hero></Hero>


    <section class="text-section">
        <div class="container">
            <div class="col-6">
                <h1>
                  In a world where everything is in a relationship, what is the role of design?
                </h1>
                <p>The Polimi Design System (the School of Design, the Department of Design, and POLI.Design) presents “INTERDEPENDENCE - Designing Relationships”, a set of initiatives to reflect on relationships and connections through a selection of projects by design students.
                  We are deeply immersed in a network of relationships that is an integral part of each of us; to understand the infinite complexity of our world, we often tend to isolate particular aspects of an event or experience and see them as constituting the totality, narrowing our perspective. In reality, each choice we make, even the act of not choosing, has consequences that may not be immediately apparent, but it is essential to understand and move to action with awareness.
                  
                  The recognition of interdependence fosters cooperation, collaboration, and the acknowledgement of shared responsibilities. It underscores the importance of considering the broader implications of actions and decisions, as they often have ripple effects that extend beyond immediate boundaries.
                  Design, as a discipline interconnected with a variety of systems, acts as a catalyst and inherently has the potential and responsibility to foster and shape innovative, conscious, and collaborative relationships.
                  
                  
                  The Polimi Design System organizes a widespread event taking place in three main venues in Milan - Fabbrica del Vapore, Campus Bovisa Durando, and Salone Satellite - plus a constellation of other locations populating the city.</p>
            </div>
        </div>
    </section>
    <section id="map-section">
        <div id="map"></div>
    </section>
    <section class="text-section">
        <div class="container">
            <div class="col-4">
                <p>Ulteriore sezione di testo.</p>
            </div>
            <div class="col-8">
                <p>Seconda colonna più grande di contenuti.</p>
            </div>
        </div>
    </section>

</Layout>


<!-- ---------- SCROLL ---------- -->
<!-- ---------- SCROLL ---------- -->
<!-- ---------- SCROLL ---------- -->

<script>
  import gsap from 'gsap';
  import { Observer } from "gsap/Observer";
  import { ScrollToPlugin } from "gsap/ScrollToPlugin";

  gsap.registerPlugin(Observer, ScrollToPlugin);
  
  let sections = document.querySelectorAll("section"),
      currentSection = 0,
      animating = false;
  
  function gotoSection(index: number, direction: number) {
    // Get the current scroll position
    const currentScroll = window.pageYOffset;
    // Get the current section's bounds
    const currentRect = sections[currentSection].getBoundingClientRect();
    const currentSectionTop = currentScroll + currentRect.top;
    const currentSectionBottom = currentSectionTop + currentRect.height;

    // Check if we're within the current section and it's scrollable
    if (currentRect.height > window.innerHeight) {
      // If we're not at the top/bottom of the section, don't switch sections
      if (direction === 1 && currentScroll < currentSectionBottom - window.innerHeight) return;
      if (direction === -1 && currentScroll > currentSectionTop) return;
    }

    // Proceed with section change if we're at the edge
    index = Math.min(Math.max(index, 0), sections.length - 1);
    
    if (currentSection !== index && !animating) {
      animating = true;
      gsap.to(window, {
        scrollTo: {
          y: sections[index],
          autoKill: false
        },
        duration: 1,
        ease: "power1.inOut",
        onComplete: () => {
          animating = false;
          currentSection = index;
        }
      });
    }
  }
  
  // Initialize scroll position
  gsap.set(window, {scrollTo: 0});
    
  Observer.create({
    target: window,
    type: "wheel,touch,pointer",
    onDown: () => !animating && gotoSection(currentSection + 1, 1),
    onUp: () => !animating && gotoSection(currentSection - 1, -1),
    tolerance: 10
  });
</script>



<!-- ---------- ANIMAZIONE HEADER ---------- -->
<!-- ---------- ANIMAZIONE HEADER ---------- -->
<!-- ---------- ANIMAZIONE HEADER ---------- -->

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("DOMContentLoaded", (event) => {
  gsap.registerPlugin(ScrollTrigger)


  gsap.from(".left-sidebar", {
    x: -100,
    opacity: 1,
    duration: 0.5,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 50%",
      toggleActions: "restart none none reverse",
      /* markers: true, */
    },
  }); 

  gsap.from(".right-sidebar", {
    x: 100,
    opacity: 1,
    duration: 0.5,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 50%",
      toggleActions: "restart none none reverse",
      /* markers: true, */
    },
  }); 





});
</script>





<style>

section {
    width: 100%;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 20px;
    z-index: 1;
}

.container {
    display: flex;
    flex-wrap: wrap;
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    z-index: 1;
}




/* Mobile */
@media (max-width: 768px) {
    .container {
        width: 95%;
    }

    
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
    .container {
        width: 85%;
    }
}

/* Desktop */
@media (min-width: 1025px) {
    .container {
        max-width: 1200px;
    }
}


.text-section {
    /* background: #f4f4f4; */
    color: #333;
    padding: 50px;
}


/* ho tolto il link perchè non ho l'immagine e mi dava fastidio vedere l'errore */
#map-section {
    background: url(#) no-repeat center center;
    background-size: cover;
    color: white;
}

</style>