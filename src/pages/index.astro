---

import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import categories from "../assets/data/categories.json";
import locations from '../assets/data/location.json';
import IndexCategory from '../components/IndexCategory.astro';
import ButtonSmall from '../components/ButtonSmall.astro';
import IndexMap from '../components/IndexMap.astro';

import {Image} from 'astro:assets';
import logoPolimi from '../assets/logos/Polimi.svg';
import logoPolimiDesign from '../assets/logos/logo_poli_uniti.svg'
import logoPoliDesign from '../assets/logos/Poli.design.svg';
import logoMottola from '../assets/logos/mottola-black.svg';
import logoZetafonts from '../assets/logos/zetafonts-black.svg';
import logoNavigare from '../assets/logos/navigare.svg';
import logoComune from '../assets/logos/logo-comune-milano.svg';
import logoCampoTeatrale from '../assets/logos/campoteatrale.svg';
import logoFdV from '../assets/logos/fdv.svg';

import logoDesignWeek from '../assets/logos/logo-design-week.svg';
import mappa from  '../assets/img/MapImage.png';
import CategoryItem from '../components/CategoryItem.astro';

/* const textContent = location.map(loc => ({
  title: loc.title,
  place: loc.place,
  description: loc.description
})); */

---


<Layout>
	
  <div class="section mostra">
    <Hero></Hero>
    <div class="gradient-head"></div>

  </div>


<section class="container-section">
    <!-- SECTION 1 -->
    <section class="text-section section" id="section-1">
      <!-- LOGOS -->
      
      <div class="container">
        <div class="logo-container" style="display:flex">
            <div class="logo-left" id="loghi-poli">
              
            </div>
          </div>
          <!-- <div class="logos-partners-row" id="loghi-partner-row-1">
            <div class="loghi-partner-main">

              <h4>From an idea by</h4> 

   
                <div class="loghi-partner" id="loghi-support">
                  <div>
                    <Image src={logoPolimiDesign} alt="Politecnico di Milano">
                  </div>
                  <div id="polidesign">
                    <Image src={logoPoliDesign} alt="PoliDesign">
                  </div>
                </div>
            </div>

         
            

             <div class="loghi-partner-main">

  
     
                  <div class="loghi-partner" id="loghi-support">
                    <div >
                      <Image src={logoDesignWeek} alt="DesignWeek" id="logoDesignWeek">
                    </div>
                  </div>
              </div>
             
             
          </div> -->
          <div class="logos-partners-row">


            <div class="loghi-partner-main">
              <h4>Technical partners</h4> 
   
               <div class="loghi-partner">
                 <div >
                   <Image src={logoMottola} alt="Mottola">
                 </div>
                 <div id="zetafonts">
                   <Image src={logoZetafonts} alt="Zetafonts">
                 </div>
                 <div >
                  <Image src={logoNavigare} alt="Navigare">
                </div>
             </div>
             
          </div>
          <div class="loghi-partner-main">
            <h4>With the patronage of</h4> 
             <div class="loghi-partner" id="loghi-comune-mdw">
              <div >
               

                <Image src={logoComune} alt="Comune di Milano" id="logoComune">
              </div>
          
            </div>
           </div>
        
            <div class="loghi-partner-main">

            <h4>With the support of</h4> 

   
                <div class="loghi-partner" id="loghi-support">
           
                  <div >
                    <Image src={logoCampoTeatrale} alt="Campo Teatrale" id="logoCampoteatrale">
                  </div>
                
                </div>
            </div>

         
          
         
       
        
        </div>
        </div>
          <div class="col-9">
              <h2 class="gradient-text quote">
                In a society characterized by a growing sense of increasing polarization, how can design deal with opposites and the nuances in-between polarities to drive towards constructive change? 
              </h2>
              <p>The Polimi Design System (the School of Design, the Department of Design, and POLI.Design) presents <b>“INTERDEPENDENCE: exploring opposites”</b>, a set of initiatives to reflect on how design interacts with <b>polarities</b> and <b>contrasting dimensions</b>, through a selection of projects by students from Politecnico and from a network of about 40 design universities around the world.  
              </p>                
              <p>
                All the exhibited projects do not seek to provide answers or certainties, rather challenge us to <b>imagine new questions and rethink both the present and the future</b>.
              </p> 
              <div style="padding-top: 1.5em">
                <ButtonSmall label="READ MORE" href="/about"></ButtonSmall>

              </div>
          </div>
      </div>
  </section>

  <section class="map-section section">
    <IndexMap></IndexMap>
  </section>



  
  <!-- SECTION 3 -->
  <section class="text-section section">
      <!-- <h1 class="gradient-text right"><span style="font-family: 'Milligram Macro';padding-right: 0.7em">interdependence </span> <span style="font-weight: normal;">exploring opposites</span></h1> -->
      <div class="col-9">
        <p> che testo va messo?</p>
      </div>
    <IndexCategory></IndexCategory>
  </section>
</section>

</Layout>








<!-- ---------- SCROLL ---------- -->
<!-- ---------- SCROLL ---------- -->
<!-- ---------- SCROLL ---------- -->

<!-- scroll con scrolltrigger -->
<!-- <script>
  import gsap from 'gsap';
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { ScrollToPlugin } from "gsap/ScrollToPlugin";

  
  document.addEventListener("DOMContentLoaded", () => {
    // Register plugins
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

    // Get all sections
    const sections = gsap.utils.toArray<HTMLElement>('.section');
      function goToSection(index: number) {
      console.log(index);
      gsap.to(window, {
        duration: 1,
        scrollTo: {
          y: sections[index],
          autoKill: true
        },
        ease: "power2.inOut"
      });
    }
    // Create ScrollTrigger for each section
    sections.forEach((section, i) => {
      ScrollTrigger.create({
        trigger: section,
        start: "5% 95%", 
        end: "95% 5%",
        // markers: true,
        preventOverlaps: true,
        fastScrollEnd: true, // Better handling of fast scrolling
        onEnter: () => goToSection(i),
        onEnterBack: () => goToSection(i)
      });
    });

    function mostra(index: number){
      sections.forEach((section, i) => {
        if (i === index) {
          section.classList.add("mostra");
        } else {
          section.classList.remove("mostra");
        }
      });

    // Function to animate to a specific section
    
  }
  });
</script> -->

<!-- scroll con scroll to -->
<!-- <script>
  import gsap from "gsap";
import { ScrollToPlugin } from "gsap/ScrollToPlugin";

document.addEventListener("DOMContentLoaded", () => {
  gsap.registerPlugin(ScrollToPlugin);

  const sections = document.querySelectorAll(".section");
  let currentIndex = 0;
  let isAnimating = false;

  function goToSection(index) {
    if (isAnimating) return;

    isAnimating = true;
    currentIndex = index;

    gsap.to(window, {
      duration: 1,
      scrollTo: {
        y: sections[index],
        autoKill: false
      },
      ease: "power2.inOut",
      onComplete: () => {
        isAnimating = false;
      }
    });
  }

  function handleWheel(event) {
    if (isAnimating) return;

    const currentSection = sections[currentIndex];
    const isScrollingDown = event.deltaY > 0;
    const scrollTop = window.scrollY;
    const sectionTop = currentSection.offsetTop;
    const sectionBottom = sectionTop + currentSection.offsetHeight;
    const viewportBottom = scrollTop + window.innerHeight;

    if (currentSection.offsetHeight > window.innerHeight) {
      // Sezione più alta del viewport → permette lo scroll fino ai limiti
      if ((isScrollingDown && viewportBottom < sectionBottom) || (!isScrollingDown && scrollTop > sectionTop)) {
        return; // Permette lo scroll naturale
      }
    }

    // Cambia sezione solo quando si arriva ai limiti
    if (isScrollingDown && currentIndex < sections.length - 1) {
      event.preventDefault();
      goToSection(currentIndex + 1);
    } else if (!isScrollingDown && currentIndex > 0) {
      event.preventDefault();
      goToSection(currentIndex - 1);
    }
  }

  window.addEventListener("wheel", handleWheel, { passive: false });

  // Vai alla prima sezione all'inizio
  goToSection(0);
});

</script> -->

<!-- !!! Scroll to section from hero !!! -->
<!-- <script>
  import gsap from 'gsap';
  import { ScrollToPlugin } from "gsap/ScrollToPlugin";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("DOMContentLoaded", () => {
    gsap.registerPlugin(ScrollToPlugin, ScrollTrigger);

    const hero = document.querySelector(".mostra");
    const firstSection = document.querySelector(".text-section");
    let isInHero = true;
    let isAnimating = false;

    function goToSection(target: HTMLElement) {
      if (isAnimating) return;
      
      isAnimating = true;
      
      gsap.to(window, {
        duration: 1,
        scrollTo: {
          y: target,
          autoKill: false
        },
        ease: "power2.inOut",
        onComplete: () => {
          isAnimating = false;
          isInHero = target === hero;
        }
      });
    }

    function handleWheel(e: WheelEvent) {
      if (isAnimating) return;

      const isScrollingDown = e.deltaY > 0;
      
      if (isInHero && isScrollingDown) {
        e.preventDefault();
        if (firstSection) {
          goToSection(firstSection as HTMLElement);
        }
      } else if (!isInHero && !isScrollingDown && firstSection && window.scrollY <= (firstSection as HTMLElement).offsetTop) {
        e.preventDefault();
        if (hero) {
          goToSection(hero as HTMLElement);
        }
      }
    }

    window.addEventListener('wheel', handleWheel, { passive: false });

    return () => {
      window.removeEventListener('wheel', handleWheel);
    };
  });
</script> -->


<!-- ---------- ANIMAZIONE HEADER ---------- -->
<!-- ---------- ANIMAZIONE HEADER ---------- -->
<!-- ---------- ANIMAZIONE HEADER ---------- -->

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("DOMContentLoaded", (event) => {
  gsap.registerPlugin(ScrollTrigger)


  gsap.from(".left-sidebar", {
    x: -100,
    opacity: 1,
    duration: 0.4,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 0%",
      toggleActions: "restart none none reverse",
      //  markers: true,
    },
  }); 

  gsap.from(".right-sidebar", {
    x: 100,
    opacity: 1,
    duration: 0.5,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 0%",
      toggleActions: "restart none none reverse",
      // markers: true,
    },
  }); 



  });


</script>

<!-- ANIMAZIONE HEADER MOBILE -->
<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("DOMContentLoaded", (event) => {
  gsap.registerPlugin(ScrollTrigger)


  gsap.from(".header_mobile", {
    y: -100,
    opacity: 1,
    duration: 0.5,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 20%",
      toggleActions: "restart none none reverse",
       markers: false,
    },
  }); 


  });


</script>



<!-- ---------- ANIMAZIONE TESTI ---------- -->
<!-- ---------- ANIMAZIONE TESTI ---------- -->
<!-- ---------- ANIMAZIONE TESTI ---------- -->


<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  document.addEventListener("DOMContentLoaded", (event) => {
  gsap.registerPlugin(ScrollTrigger)


  gsap.from(".quote", {
    y: 100,
    opacity: 0,
    duration: 0.5,
    scrollTrigger: {
      trigger: ".text-section",
      start: "left 50%",
      toggleActions: "restart none none reverse",
       markers: false,
    },
  }); 

  });


</script>





<style>
 .mostra {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 1;
  }

  .container-section {
    -webkit-mask-image: linear-gradient(to top, rgb(255, 255, 255) 94%, transparent 100%);
  
  /* mask-image: linear-gradient(to top, black 90%, transparent 100%); */
    position: relative;
    z-index: 2;
    margin-top: 100vh;
    background-color: #ffffff;
    padding: 0;
  }

  
  .text-section {
    z-index: 2;
  }

  .map-section {
    z-index: 2;
  }


section {
    width: 100%;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: min(5rem, 6%);
    padding-bottom: min(15rem,18%);;
    z-index: 1;
    /* margin-bottom: min(5rem, 6%); */
}

#section-1 {


}

.container {
    display: flex;
    flex-wrap: wrap;
    width: 90%;
    max-width: 1024px;
    margin: 0;
    z-index: 1;

}

h1,h2,h3,h4,h5,h6, p{
    color:var(--text-color);
}



/* Mobile */
@media (max-width: 768px) {
    .container {
        width: 95%;
    }

    
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
    .container {
        width: 85%;
    }
}

/* Desktop */
@media (min-width: 1025px) {
    .container {
        max-width: 1200px;
    }
}


.text-section {
    /* background: #f4f4f4; */
    color: #333;
}
.gradient-head {
  position: relative;
  top: 0;
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%);
  width: 100vw;
  height: 20vh;
}

/* ---------- MAP SECTION ---------- */
/* ---------- MAP SECTION ---------- */
/* ---------- MAP SECTION ---------- */

.map-section {
  background-size: cover;
  position: relative;
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}



/* .themes-row {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
  }

  .theme {
    position: relative;
    overflow: hidden;
  }

  .theme-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-family: 'Milligram', sans-serif;
    font-size: 1.5rem;
    line-height: normal;
    font-weight: bold;
  }

  .separator {
    opacity: 1;
  }

  .word2 {
    position: relative;
    transform: translateX(0);
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .theme-description {
    position: relative;
    height: 0;
    opacity: 0;
    transform: translateY(-20px);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 0;
    font-size: 1.2rem;
    color: var(--gradient);
  }

  .theme:hover .word2 {
    transform: translateX(calc(50vw - 100%));
  }

  .theme:hover .theme-description {
    height: auto;
    opacity: 1;
    transform: translateY(0);
    margin-top: 1rem;
  } */






.logo-container {
          display: flex;
          justify-content: space-between;
          position: relative;
          flex-direction: row;
          top: 0;
          left: 0;
          width: 100%;
          padding-bottom: clamp(1rem, 2vw, 2rem);
          mix-blend-mode: difference;
          padding-top: 40vh;
        }
        
        .logo-left {
          display: flex;
          align-items: center;
          gap: clamp(1rem, 2vw, 2rem);
          width: 60%;
        }

        .logos-partners-row {
          display: flex;
          width: 100%;
          justify-content: space-between;
          margin-bottom: 3em;
          /* max-height: 300px; */
          &#loghi-partner-row-1 {
            justify-content: space-between;
          }
        }

        #loghi-poli {
          display: flex;
          width: 100%;
          flex-direction: row;
          align-items: start;
          justify-content: center;
          gap: 7em;
        
          img {
            height: 10vh;
          }
          #polidesign img {
            height: 7vh;
            filter: invert(1)
          }
        }
     
        
        .logo-right {
          width: 30%;
          display: flex;
          align-items: center;
          justify-content: flex-end;
        }
        
        /* Shared styles for all logos */
        .logo-left img,
        .logo-right img {
          height: clamp(3rem, 4vw, 8rem); /* Responsive height using clamp */
          width: auto; /* Width will adjust based on aspect ratio */
          object-fit: contain;
          max-width: 100%; /* Prevent overflow */
        }
        .logos-partners-row {
          flex-wrap: wrap;
        }

        .loghi-partner-main {
          margin-top: 2em;
         h4 {
          text-align: left;
         } 

        }

      

        .loghi-partner {
          transform: translateY(-1em);
          display: flex;
          gap: 2em;
          align-items: center;
          justify-content: end;
          flex-wrap: wrap;
          
          &#loghi-support img {
            max-height: 150px;
            max-width: 150px ;
            
            &#logoCampoteatrale{
              max-height: 150px;
            };
            
            &#logoFdV{
              max-height: 70px;
            }

            &#logoDesignWeek {
            max-height: 80px;
            width: auto;
            transform: translateY(1EM);
            }

          }
         
          div img {
            max-width: 150px;
      
            &#logoComune {
            max-height: 150px;
            width: auto;
            }
          }
       
        }

        #loghi-comune-mdw {
          justify-content: space-between;
          
        }
        
        #zetafont {
            
            filter: invert(1);
          
        }

.container {

}




/* Mobile */
@media (max-width: 768px) {
    .container {
        width: 95%;
    }
    .logo-left {
      width: 100%;
    }



.logo-container {
  margin-top: 4rem;
  flex-direction: column;
}
#loghi-poli {
  align-items: center;
}
.loghi-partner-main {
  width: 100%;
}

.loghi-partner {
  row-gap: 0;
justify-content: space-evenly;
}

.loghi-partner-main h4 {
  text-align: center;
}

#loghi-comune-mdw {
          justify-content: center;
          
        }
        
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
    .container {
        width: 85%;
    }
    .logo-container {
      flex-direction: column;
    }
    .loghi-partner {

      align-items: left;
      justify-content: start;
    }

    .loghi-partner-main h4 {
        text-align: left;
      }
}

/* Desktop */
@media (min-width: 1025px) {
    .container {
        max-width: 1200px;
    }

}


</style>





